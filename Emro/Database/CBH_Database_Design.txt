-- Create Database for Christbay Hospital CBH
CREATE DATABASE CBH;


USE CBH;
-- CREATE PATIENT TABLE
DROP TABLE IF EXISTS tblPATIENT;

GO

CREATE TABLE tblPATIENT
(
	PATID INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	FName NVARCHAR(50) NOT NULL,
	LName NVARCHAR(50) NOT NULL,
	MName NVARCHAR(50), 
	Gender VARCHAR (10),
	MStatus VARCHAR(20),
	StateOfOrigin VARCHAR(20),
	DateOfBirth DATETIME,
	PhoneNo VARCHAR(20) NOT NULL,
	EmailAddress VARCHAR(100) null CONSTRAINT CK_Email CHECK (EmailAddress LIKE '%_@__%.__%') 
);

-- CREATE ADDRESS TABLE
DROP TABLE IF EXISTS tblADDRESS;

GO
CREATE TABLE tblADDRESS
(
	AddID INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	PATID INT FOREIGN KEY REFERENCES tblPATIENT(PATID), 
	HouseNo VARCHAR(10) ,
	StreetName NVARCHAR(Max) NOT NULL,
	City NVARCHAR(50), 
	State VARCHAR (50),
	PostCode VARCHAR(20),
	Country VARCHAR(20),
);

-- NEXT OF KIN TABLE
DROP TABLE IF EXISTS tblNEXTOFKIN;

GO
CREATE TABLE tblNEXTOFKIN
(
	NOKID INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	PATID INT FOREIGN KEY REFERENCES tblPATIENT(PATID), 
	FName NVARCHAR(50) ,
	LName NVARCHAR(50) NOT NULL,
	Gender VARCHAR(10), 
	EmailAddress VARCHAR(100),
	PhoneNo VARCHAR(20)
	
);

-- REGISTRATION TABLE
DROP TABLE IF EXISTS tblREGISTRATION;

GO
CREATE TABLE tblREGISTRATION
(
	RegID INT IDENTITY (1,1) NOT NULL PRIMARY KEY,
	PATID INT FOREIGN KEY REFERENCES tblPATIENT(PATID), 
	RegDate DATETIME
	
);

select * from tblPATIENT;


use CBH;